<div role="tabpanel" class="tab-pane" id="susong" aria-labelledby="susong-tab">
    <div class="data-tab">
        <a class="btn btn-default disabled" href="#susong1">开庭公告</a>
        <a class="btn btn-default disabled" href="#susong2">裁判文书</a>
        <a class="btn btn-default disabled" href="#susong3">法院公告</a>
        <a class="btn btn-default disabled" href="#susong4">被执行人</a>
        <a class="btn btn-default disabled" href="#susong5">失信信息</a>
        <a class="btn btn-default disabled" href="#susong6">司法协助</a>
    </div>
    <!--<div class="panel-qcc" id="susong1">-->
        <!--<div class="panel-qcc-heading"><a role="button" data-toggle="collapse" href="#susong1-body">-->
            <!--开庭公告-->
            <!--<b id="base1-count">0</b>-->
        <!--</a></div>-->
        <!--<div class="panel-qcc-body panel-collapse collapse in" id="susong1-body">-->
        <!--</div>-->
    <!--</div>-->
    <div class="panel-qcc" id="susong1">
        <div class="panel-qcc-heading">开庭公告 <b id="susong1-count">0</b></div>
        <div class="panel-qcc-body" id="susong1-body"></div>
    </div>
    <div class="panel-qcc" id="susong2">
        <div class="panel-qcc-heading">裁判文书 <b id="susong2-count">0</b></div>
        <div class="panel-qcc-body" id="susong2-body"></div>
    </div>
    <div class="panel-qcc" id="susong3">
        <div class="panel-qcc-heading">法院公告 <b id="susong3-count">0</b></div>
        <div class="panel-qcc-body" id="susong3-body"></div>
    </div>
    <div class="panel-qcc" id="susong4">
        <div class="panel-qcc-heading">被执行人 <b id="susong4-count">0</b></div>
        <div class="panel-qcc-body" id="susong4-body"></div>
    </div>
    <div class="panel-qcc" id="susong5">
        <div class="panel-qcc-heading">失信信息 <b id="susong5-count">0</b></div>
        <div class="panel-qcc-body" id="susong5-body"></div>
    </div>
    <div class="panel-qcc" id="susong6">
        <div class="panel-qcc-heading">司法协助 <b id="susong6-count">0</b></div>
        <div class="panel-qcc-body" id="susong6-body"></div>
    </div>
</div>

<script type="text/html" id="susong1_toolbar">
    <div class="layui-toolbar">
        <a href="javascript:;" class="btn btn-default susong1_toolbar" data-val="{{d.Id}}">查看</a>
    </div>
</script>
<script type="text/html" id="susong2_toolbar">
    <div class="layui-toolbar">
    <a href="javascript:;" class="btn btn-default susong2_toolbar" data-val="{{d.Id}}">查看</a>
    </div>
</script>
<script type="text/html" id="susong3_toolbar">
    <div class="layui-toolbar">
    <a href="javascript:;" class="btn btn-default susong3_toolbar" data-val="{{d.Id}}">查看</a>
    </div>
</script>
<script type="text/html" id="susong4_toolbar">
    <div class="layui-toolbar">
        <a href="javascript:;" class="btn btn-default susong4_toolbar" data-val="{{d.Id}}">查看</a>
    </div>
</script>
<script type="text/html" id="susong5_toolbar">
    <div class="layui-toolbar">
        <a href="javascript:;" class="btn btn-default susong5_toolbar" data-val="{{d.Id}}">查看</a>
    </div>
</script>
<script type="text/html" id="susong6_toolbar">
    <div class="layui-toolbar">
        <a href="javascript:;" class="btn btn-default susong6_toolbar" data-val="{{d.ExecutionNoticeNum}}">查看</a>
    </div>
</script>
<script>
    $(document).on("click", ".susong1_toolbar", function (){
        var id =  $(this).data("val");
        addNavTab("CourtAnno-"+id, "开庭公告详情", "/htmlsrc/qichacha/CourtAnno/GetCourtNoticeInfo.html?id="+id);
        return true;
    });
    $(document).on("click", ".susong2_toolbar", function (){
        var id = $(this).data("val");
        addNavTab("JudgeDocDetail-"+id, "裁判文书详情", "/htmlsrc/qichacha/JudgeDoc/GetJudgementDetail.html?id="+id);
        return false;
    });
    $(document).on("click", ".susong3_toolbar", function (){
        var id = $(this).data("val");
        addNavTab("CourtNoticeDetail-"+id, "法院公告详细信息", "/htmlsrc/qichacha/CourtNotice/SearchCourtAnnouncementDetail.html?id="+id);
        return true;
    });

    var loadBlock2Status = false;
    function loadBlock2() {
        loadBlock2Status = true;
        // 开庭公告
        laytableRender({
            id: "susong1-body",
            autoShift: false,
            url: remoteApi.qccCourtAnnoSearchCourtNotice+"?size=5&fullName="+COMPANY_NAME,
            cols: [
                [
                    BOOTSTRAP_INDEX_FILED,
                    { title:'操作', templet: "#susong1_toolbar"},
                    {title:"案号",field:"CaseNo"},
                    {title:"开庭日期",field:"LiAnDate", setWidth: 90},
                    {title:"案由",field:"CaseReason", setWidth: 110},
                    {title:"被告",field:"DefendantList"},
                    {title:"原告",field:"ProsecutorList", setWidth: 80}

                ]
            ],
            onData:function (data) {
                if(data.rows){
                    data.rows.forEach(function (row) {
                        row["LiAnDate"] = subDateStr(row.LiAnDate);
                    });
                }
                fixOnDataLoad("susong1",data);
                return data;
            }
        });

        // 裁判文书
        var susong2DataList = [];
        laytableRender({
            id: "susong2-body",
            autoShift: false,
            url: remoteApi.qccJudgeDocSearchJudgmentDoc+"?fullName="+COMPANY_NAME,
            cols: [
                [
                    BOOTSTRAP_INDEX_FILED,
                    { title:'操作', templet: "#susong2_toolbar"},
                    {title:"裁判文书名字",field:"CaseName", setWidth: 120},
                    {title:"案由",field:"CaseReason"},
                    {title:"发布时间",field:"SubmitDate"},
                    {title:"裁判文书编号",field:"CaseNo"},
                    {title:"涉案人员角色",field:"CaseRole"},
                    {title:"执行法院",field:"Court"}
                ]
            ],
            onData:function (data) {
                if(data && data.total && data.total > 0){
                    $("a[href='#susong2']").removeClass("disabled");
                    susong2DataList = data.rows;
                    scrollToElm("susong2");
                    $("#susong2-count").html(data.total);
                    data.rows.forEach(function (item) {
                        var CaseRole = JSON.parse(item["CaseRole"]);
                        var roleText = "";
                        CaseRole.forEach(function (role) {
                            roleText += role["R"] +"：" + role["P"] + "；<br/>";
                        });
                        item["CaseRole"] = roleText
                    });
                    return data;
                }
            }
        });

        // 法院公告
        laytableRender({
            id: "susong3-body",
            autoShift: false,
            url: remoteApi.qccCourtNoticeSearchCourtAnnouncement+"?companyName="+COMPANY_NAME,
            cols: [
                [
                    BOOTSTRAP_INDEX_FILED,
                    { title:'内容', templet: "#susong3_toolbar"},
                    {title:"当事人",field:"Party"},
                    {title:"公告类型",field:"Category"},
                    {title:"公告人",field:"Court"},
                    {title:"刊登时间",field:"PublishedDate"}
                ]
            ],
            onData:function (data) {
                fixOnDataLoad("susong3", data);
            }
        });

        var susong5Datalist = [];
        // 失信信息
        laytableRender({
            id: "susong5-body",
            autoShift: false,
            url: remoteApi.qccCourtSearchShiXin+"?fullName="+COMPANY_NAME,
            cols: [
                [
                    BOOTSTRAP_INDEX_FILED,
                    {title:'操作', templet: "#susong5_toolbar"},
                    {title:"立案时间",field:"LiAnDate"},
                    {title:"案号",field:"AnNo"},
                    {title:"执行法院",field:"ExecuteGov"},
                    {title:"所在省份缩写",field:"Province"},
                    {title:"发布时间",field:"PublicDate"}
                ]
            ],
            onData:function (data) {
                fixOnDataLoad("susong5", data);
            }
        });
        $(document).on("click", ".susong5_toolbar", function (){
            var id = $(this).data("val");
            addNavTab("qccSearchShiXin-"+id, "失信信息详情", "/htmlsrc/qichacha/Court/GetShiXinDetail.html?id="+id, susong5Datalist[$(this).closest("tr").data("index")]);
            return false;
        });

        var susong4DataList = [];
        // 执行信息
        laytableRender({
            id: "susong4-body",
            autoShift: false,
            url: remoteApi.qccCourtSearchZhiXing+"?fullName="+COMPANY_NAME,
            cols: [
                [
                    BOOTSTRAP_INDEX_FILED,
                    {title:'操作', templet: "#susong4_toolbar"},
                    {title:"立案号",field:"AnNo"},
                    {title:"立案时间",field:"LiAnDate"},
                    {title:"执行法院",field:"ExecuteGov"},
                    {title:"标地",field:"BiaoDi"}
                ]
            ],
            onData:function (data) {
                susong4DataList = data.rows;
                fixOnDataLoad("susong4", data);
            }
        });
        $(document).on("click", ".susong4_toolbar", function (){
            var id = $(this).data("val");
            addNavTab("qccSearchZhiXing-"+id, "执行信息详情", "/htmlsrc/qichacha/Court/GetZhiXingDetail.html?id="+id, susong4DataList[$(this).closest("tr").data("index")]);
            return false;
        });

        var JudicialAssistanceDataList = [];
        // susong6-body 司法协助
        $.ajax({
            url: remoteApi.qccJudicialAssistanceGetJudicialAssistance+"?fullName="+COMPANY_NAME,
            success: function (res) {
                if(res.data && res.data.list && res.data.list.length > 0){
                    $("a[href='#susong6']").removeClass("disabled");
                    JudicialAssistanceDataList = res.data.list;
                    $("#susong6-count").html(JudicialAssistanceDataList.length);
                }
                laytableRender({
                    id: "susong6-body",
                    page: false,
                    cols: [
                        [
                            BOOTSTRAP_INDEX_FILED,
                            {title:'操作', templet: "#susong6_toolbar"},
                            {title:"被执行人",field:"ExecutedBy" },
                            {title:"股权数额",field:"EquityAmount" },
                            {title:"执行法院",field:"EnforcementCourt" },
                            {title:"执行通知书文号",field:"ExecutionNoticeNum" },
                            {title:"类型 | 状态",field:"Status" }
                        ]
                    ],
                    data: JudicialAssistanceDataList
                });
            }
        });

        $(document).on("click", ".susong6_toolbar", function (){
            var id = $(this).data("val");
            id = id.replace(/\(|\)/g,"");
            addNavTab("qccJudicialAssistanceGetJudicialAssistance-"+id, "司法协助详情", "/htmlsrc/qichacha/JudicialAssistance/GetJudicialAssistanceDetail.html?id="+id, JudicialAssistanceDataList[$(this).closest("tr").data("index")]);
            return false;
        });
    }
</script>